@model IEnumerable<UserRolesViewModel>
<table id="userTable" class="table table-hover table-sm table-striped data-table no-wrap mb-0 fs--1 w-100">
    <thead class="bg-200">
        <tr>
            <th class="sort">
                @Html.DisplayNameFor(model => model.FirstName)
            </th>
            <th class="sort">
                @Html.DisplayNameFor(model => model.LastName)
            </th>
            <th class="sort">
                @Html.DisplayNameFor(model => model.UserName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IsActive)
            </th>
            <th class="sort">
                نقش ها
            </th>
            <th class="no-sort"></th>
        </tr>
    </thead>
    <tbody class="bg-white">
        @foreach (var user in Model)
        {
        <tr class="hover-actions-trigger hover-shadow">
            <td>
                @user.FirstName
            </td>
            <td>
                @user.LastName
            </td>
            <td>
                @user.UserName
            </td>
            <td>
                @if (user.IsActive)
                {
                    <span class="badge badge-success">فعال</span>
                }
                else
                {
                    <span class="badge badge-danger">غیرفعال</span>
                }
            </td>
            <td>@string.Join(" , ", user.Roles.ToList())</td>
            <td class="py-2 align-middle white-space-nowrap">
                <div class="dropdown text-sans-serif">
                    <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal mr-3" type="button"
                            id="order-dropdown-1" data-toggle="dropdown" data-boundary="viewport" aria-haspopup="true" aria-expanded="false">
                        <span class="fas fa-ellipsis-h fs--1"></span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right border py-0" aria-labelledby="order-dropdown-1">
                        <div class="bg-white py-2">
                            <a class="dropdown-item" asp-controller="UserRoles" asp-action="Manage" asp-route-Id="@user.Id">تنظیمات</a>
                            <div class="dropdown-divider"></div>
                            <form id="form_active_@user.Id" asp-controller="UserRoles" method="post"
                                  asp-action="OnPostActive" asp-route-Id="@user.Id" onsubmit="return jQueryModalActive(this)">
                                <a href="javascript:$('#form_active_@user.Id').submit();" class="dropdown-item text-danger">
                                    تغییر وضعیت
                                </a>
                            </form>
                        </div>
                    </div>
                </div>
            </td>
        </tr>
        }
    </tbody>
    <tfoot class="bg-200">
        <tr>
            <th class="sort">
                @Html.DisplayNameFor(model => model.FirstName)
            </th>
            <th class="sort">
                @Html.DisplayNameFor(model => model.LastName)
            </th>
            <th class="sort">
                @Html.DisplayNameFor(model => model.UserName)
            </th>
            <th class="sort">
                @Html.DisplayNameFor(model => model.IsActive)
            </th>
            <th class="sort">
                نقش ها
            </th>
            <th></th>
        </tr>
    </tfoot>
</table>
<script>
    $(document).ready(function () {
        $("#userTable").DataTable({
            responsive: true,
            "order": [[0, "asc"]]
        });
    });
</script>
